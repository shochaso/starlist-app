# Flutter App Startup Performance Check Workflow
#
# このワークフローは、プルリクエストが作成・更新されるたびに、
# Flutterアプリの起動パフォーマンスを自動で計測します。
# 要件定義書に記載された「起動時間3秒以内」という基準を満たしているかを確認し、
# パフォーマンスの低下を早期に検知することを目的とします。

name: Flutter Startup Performance Check

on:
  pull_request:
    branches:
      - main
      - develop

jobs:
  check_startup_performance:
    name: Check Startup Performance
    runs-on: ubuntu-latest

    steps:
      # Step 1: リポジトリのコードをチェックアウト
      - name: Checkout repository
        uses: actions/checkout@v4

      - uses: subosito/flutter-action@v2
        with:
          channel: 'stable'
      - run: flutter doctor -v
      - run: flutter devices
      - run: flutter run -d web-server --trace-startup --profile --target lib/main.dart


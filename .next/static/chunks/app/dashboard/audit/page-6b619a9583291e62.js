(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{8736:function(e,t,s){Promise.resolve().then(s.bind(s,687))},687:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return AuditDashboard}});var a=s(7437),c=s(2265),l=s(8811),n=s.n(l),r=s(1396),d=s.n(r);function getVerdictColor(e){switch(e){case"pass":return"border-green-500 bg-green-50";case"warning":return"border-yellow-500 bg-yellow-50";case"fail":return"border-red-500 bg-red-50";default:return""}}function getVerdictBadge(e){switch(e){case"pass":return"✅";case"warning":return"⚠️";case"fail":return"❌";default:return""}}function KPIStat(e){let{label:t,value:s,hint:c,verdict:l,mean:n,stdDev:r,currentValue:d}=e;getVerdictColor(l),getVerdictBadge(l);let i=l;if(!l&&void 0!==n&&void 0!==r&&"number"==typeof d){let e=Math.abs(d-n);i=e>3*r?"fail":e>2*r?"warning":"pass"}let o=i||l,u=getVerdictColor(o),h=getVerdictBadge(o);return(0,a.jsxs)("div",{className:"rounded-2xl shadow p-4 border-2 ".concat(u),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-xs opacity-60",children:t}),h&&(0,a.jsx)("span",{className:"text-lg",children:h})]}),(0,a.jsx)("div",{className:"text-2xl font-semibold",children:s}),c&&(0,a.jsxs)("div",{className:"text-xs opacity-60 mt-1",children:["Target: ",c]}),void 0!==n&&void 0!==r&&(0,a.jsxs)("div",{className:"text-xs opacity-50 mt-1",children:["μ=",n.toFixed(2),", σ=",r.toFixed(2)]})]})}let i=n()(()=>Promise.all([s.e(245),s.e(208)]).then(s.bind(s,1208)),{loadableGenerated:{webpack:()=>[1208]},ssr:!1});function calculateVerdict(e,t,s){let a=Math.abs(e-t);return a>3*s?"fail":a>2*s?"warning":"pass"}function AuditDashboard(){let[e,t]=(0,c.useState)(null),[s,l]=(0,c.useState)(null);(0,c.useEffect)(()=>{fetch("/dashboard/data/latest.json",{cache:"no-cache"}).then(e=>e.json()).then(t).catch(()=>t(null)),fetch("/dashboard/data/stats.json",{cache:"no-cache"}).then(e=>e.json()).then(l).catch(()=>l(null))},[]);let n=s&&e?calculateVerdict(e.slack_success_rate,s.mean,s.stdDev):void 0,r=s&&e?calculateVerdict(e.p95_latency_ms,s.mean,s.stdDev):void 0,o=s&&e?calculateVerdict(e.checkout_success_rate,s.mean,s.stdDev):void 0;return(0,a.jsxs)("div",{className:"p-6 grid gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Audit KPI Dashboard"}),(0,a.jsxs)("div",{className:"flex gap-2 text-sm",children:[(0,a.jsx)(d(),{href:"/docs/ops/RACI_MATRIX.md",className:"text-blue-600 hover:underline",children:"\uD83D\uDCCB RACI"}),(0,a.jsx)(d(),{href:"/docs/ops/RISK_REGISTER.md",className:"text-blue-600 hover:underline",children:"⚠️ リスク登録票"}),(0,a.jsx)(d(),{href:"/docs/ops/DASHBOARD_FINAL_CHECKLIST.md",className:"text-blue-600 hover:underline",children:"✅ 受入テスト"})]})]}),e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsx)(KPIStat,{label:"Slack Success",value:"".concat((100*e.slack_success_rate).toFixed(2),"%"),hint:"≥ 99%",verdict:n,mean:null==s?void 0:s.mean,stdDev:null==s?void 0:s.stdDev,currentValue:e.slack_success_rate}),(0,a.jsx)(KPIStat,{label:"Day11 Count",value:e.day11_count}),(0,a.jsx)(KPIStat,{label:"p95 Latency",value:"".concat(e.p95_latency_ms," ms"),hint:"< 2000ms",verdict:r,mean:null==s?void 0:s.mean,stdDev:null==s?void 0:s.stdDev,currentValue:e.p95_latency_ms}),(0,a.jsx)(KPIStat,{label:"Checkout Success",value:"".concat((100*e.checkout_success_rate).toFixed(2),"%"),hint:"≥ 96%",verdict:o,mean:null==s?void 0:s.mean,stdDev:null==s?void 0:s.stdDev,currentValue:e.checkout_success_rate}),(0,a.jsx)(KPIStat,{label:"Mismatches (today)",value:e.mismatches_today,hint:"= 0"}),(0,a.jsx)(KPIStat,{label:"Zero-Streak",value:"".concat(e.mismatch_streak_zero_days," days")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(i,{title:"Day11 p95(ms) — Weekly",seriesKey:"p95_latency_ms"}),(0,a.jsx)(i,{title:"Checkout Success — Weekly",seriesKey:"checkout_success_rate",formatPercent:!0})]}),(0,a.jsxs)("div",{className:"text-xs opacity-60",children:["Updated at: ",new Date(e.updated_at).toLocaleString("ja-JP",{timeZone:"Asia/Tokyo"})]}),(0,a.jsx)("footer",{className:"mt-8 pt-4 border-t border-gray-200",children:(0,a.jsx)("div",{className:"text-xs opacity-60",children:(0,a.jsx)(d(),{href:"/docs/planning/DAY12_10X_EXECUTION_PROMPTS.md",className:"text-blue-600 hover:underline",children:"\uD83D\uDCE6 Day12 10\xd7強化パック"})})})]}):(0,a.jsx)("div",{className:"text-sm opacity-70",children:"Loading latest KPI…"})]})}}},function(e){e.O(0,[381,971,472,744],function(){return e(e.s=8736)}),_N_E=e.O()}]);
\# Starlist タスク管理

このファイルはStarlistプロジェクトの開発タスクを管理・追跡するために使用します。タスクは優先度と開発フェーズに基づいて整理されています。

\## 優先度レベル

\- \*\*P0\*\*: 緊急（即時対応が必要）

\- \*\*P1\*\*: 高（次回リリースに含める必要あり）

\- \*\*P2\*\*: 中（できれば次回リリースに含めたい）

\- \*\*P3\*\*: 低（将来のリリースで対応）

\## 状態

\- 🔄 進行中

\- ✅ 完了

\- 🔜 次のスプリント

\- 📅 スケジュール済み

\- ⏸️ 保留中

\## フェーズ1タスク（MVP）

\### 認証システム

\- \[x\] P1 🔄 ✅ 完了 ユーザー登録機能

\- \[x\] P1 🔄 ✅ 完了 ログイン機能

\- \[x\] P2 🔜 ✅ 完了 ソーシャルログイン連携

\- \[ \] P2 📅 アカウント管理画面の実装

\- \[ \] P2 📅 パスワードリセット機能

\### プロフィール管理

\- \[x\] P1 ✅ 基本プロフィール情報の設定 ✅ 完了

\- \[x\] P1 ✅ スター/ファン区分の実装 ✅ 完了

\- \[ \] P2 🔜 プロフィール画像アップロード

\- \[ \] P2 📅 プロフィール閲覧権限設定

\- \[ \] P3 📅 プロフィール編集履歴

\### データ連携

\- \[x\] P1 🔄 ✅ 完了 YouTube視聴履歴

\- \[x\] P1 🔜 ✅ 完了 Spotify再生履歴

\- \[ \] P1 📅 データ取り込みの精度UP

\- \[ \] P2 📅 Amazon購入履歴取込

\- \[ \] P2 📅 Netflix視聴履歴連携

\- \[ \] P3 📅 スクリーンタイムデータ連携

\### UI/UX基本実装

\- \[x\] P1 🔄 ✅ 完了 アプリのテーマ設定

\- \[x\] P1 ✅ ナビゲーション構造の実装 ✅ 完了

\- \[x\] P1 🔜 ✅ 完了 基本リストビューの実装

\- \[ \] P2 📅 タイムライン表示の実装

\- \[ \] P2 📅 ダークモード対応

### 課金システム

（フェーズ1へ移動）

### 機能開発

- [ ] **新規スター登録・認証フローの実装**
  - [ ] **DBスキーマ設計**:
    - [ ] `users`テーブルに`verification_status`カラムを追加/更新 (`awaiting_terms_agreement`, `awaiting_ekyc`, `awaiting_parental_consent`, `awaiting_sns_verification`, `pending_review`, `approved`, `rejected`)
    - [ ] `parental_consents`テーブルを新規作成
    - [ ] Supabaseマイグレーションスクリプトの作成
  - [ ] **ステップA: 事務所利用規約への同意画面 (`TermsAgreementScreen`)**
    - [ ] UI/UX実装
    - [ ] 同意状態の永続化とステータス更新 (`awaiting_ekyc`)
    - [ ] Widgetテスト作成
  - [ ] **ステップB: eKYCによる本人・年齢確認 (`eKYCStartScreen`)**
    - [ ] サードパーティeKYCサービスのSDK連携
    - [ ] コールバックを受け取るAPIエンドポイント実装 (Supabase Edge Functions)
    - [ ] 年齢判定ロジック（18歳未満/以上）を実装
    - [ ] ステータス更新ロジック (`awaiting_sns_verification` or `awaiting_parental_consent`)
    - [ ] ユニットテスト/統合テスト作成
  - [ ] **ステップC: 親権者同意フロー (`ParentalConsentScreen`)**
    - [ ] UI/UX実装（情報入力、同意書DL、画像アップロード）
    - [ ] 同意書アップロード処理 (Supabase Storage)
    - [ ] 親権者情報をDBに保存するAPI実装
    - [ ] ステータス更新ロジック (`awaiting_sns_verification`)
    - [ ] Widgetテスト作成
  - [ ] **ステップD: SNSアカウント所有権確認**
    - [ ] 既存のSNS連携機能を認証フローに統合
    - [ ] 所有権確認ロジック（ユニークコード埋め込み等）を実装
    - [ ] ステータス更新ロジック (`pending_review`)
    - [ ] 統合テスト作成
  - [ ] **運営向け承認管理画面の強化**
    - [ ] 申請者情報（eKYC結果、年齢、親権者同意書など）の一元表示
    - [ ] 承認(`approved`) / 拒否(`rejected`)の実行機能
    - [ ] 変更後のステータスをDBに反映
  - [ ] **認証フロー全体の制御**
    - [ ] `verification_status`が`approved`になるまで機能制限をかけるロジックを実装

- [ ] **UI/UX改善**

\## フェーズ2タスク

\### OCR機能

\- \[ \] P1 📅 レシート読み取り機能

\- \[ \] P1 📅 商品情報の抽出ロジック

\- \[ \] P2 📅 重複検出アルゴリズム

\- \[ \] P2 📅 OCR精度改善

\- \[ \] P3 📅 プライバシー考慮機能

\### プライバシー設定

\- \[ \] P1 📅 項目別公開設定

\- \[ \] P1 📅 閲覧権限の細分化

\- \[ \] P2 📅 ブロック機能

\- \[ \] P2 📅 コンテンツフィルタリング

\- \[ \] P3 📅 自動プライバシー推奨設定

\## フェーズ3タスク

\### AI分析機能

\- \[ \] P1 📅 トレンド分析アルゴリズム

\- \[ \] P1 📅 レコメンデーションエンジン

\- \[ \] P2 📅 感情分析機能

\- \[ \] P2 📅 コンテンツカテゴライズ自動化

\- \[ \] P3 📅 予測モデルの実装

\### インタラクション拡張

\- \[ \] P1 📅 コメント機能の高度化

\- \[ \] P1 📅 リアクションシステムの拡張

\- \[ \] P2 📅 有料提案システム

\- \[ \] P2 📅 イベント通知機能

\- \[ \] P3 📅 インタラクション分析ダッシュボード

\## 進捗追跡

\### 現在のスプリント（2023/4/1-4/14）

\- 認証システムの基礎実装

\- 基本UIコンポーネントの作成

\- データモデルの設計・実装

\- YouTube API連携のプロトタイピング

\### 次回スプリント（2023/4/15-4/28）

\- プロフィール管理システムの実装

\- タイムライン表示の基本実装

\- Supabase連携の最適化

\- テスト自動化の設定

\## 技術的負債＆リファクタリング予定

\- \[ \] P2 📅 状態管理ライブラリの統一

\- \[ \] P2 📅 エラーハンドリングの統一化

\- \[ \] P3 📅 非同期処理パターンの標準化

\- \[ \] P3 📅 UI層のコンポーネント分割

\- \[ \] P3 📅 テストカバレッジの向上

\## 参照

\- \[Planning.txr\](Planning.txr) - プロジェクトの全体計画

\- \[README.txr\](README.txr) - プロジェクト概要と要件定義

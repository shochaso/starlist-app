---
source_of_truth: true
version: v1
updated: 2025-11-17
owner: tim (COO/PM)
status: draft
category: legal/data_license
---

# データライセンスと外部APIポリシー（ドラフト）

## 1. 背景と目的

STARLISTは、スターが日常の視聴・購買・愛用品データをファンと安全に共有し収益化するプラットフォームです。プラットフォーム内のデータは根本的にはスターおよびファンのものであり、それらの権利を尊重したうえで、**集計・統計ベースの情報を外部にも提供し、事業的な価値を創出**していくための仕組みを本ポリシーで定義します。

## 2. 適用範囲

- **対象データ**: STARLIST内のユーザー行動、サブスクリプション売上、スパチャ統計、Sポイント消費など。
- **対象API**:
  - スター本人向けAPI（個別アカウントの統計）
  - 事業者向け匿名化/集計API（ジャンル・カテゴリ別の傾向など）
- **対象者**: STARLIST社員、エンジニアリングパートナー、外部開発者、法人購読者（データライセンス契約者）。

## 3. データライセンスの原則

### 3.1. 個人情報の保護

- 個人を特定できるPII（氏名、生年月日、メールアドレス、決済ID など）は外部APIでは一切提供しない。
- スター本人向けAPIであっても、本人から明示的な同意がない限り、他スターやファンの個人情報を含めない。
- APIレスポンスには常に「データ収集日」「集計粒度」「対象範囲」などのメタデータを含め、透明性を確保する。

### 3.2. 集計/統計の原則

- 集計レイヤ（例: 日次、週次、ジャンル別）は `group by` で複数ユーザーを含み、必ず一定件数以上のデータを組み合わせる。
- 5本以上のYouTube視聴ログを一件の投稿として扱う場合も、外部に出す際には視聴者単位ではなく「ジャンル別視聴傾向」など形態で提供。
- 生ログの提供ではなく、スコア/指数/増分などを算出してライセンス提供することを原則とする。

### 3.3. 再利用制限とライセンス

- API利用契約では再販売・再配布・再識別（Re-identification）を禁止する条項を組み込む。
- データを含むレポートやダッシュボードの第三者共有をする場合も、STARLISTロゴおよび「STARLISTデータライセンス」表記を必須とする。
- APIキー/トークンの共有はNG。災害などでキー再発行が必要になった場合は即時ローテーションと監査ログ登録を行う。

## 4. 外部APIの設計指針

### 4.1. スター本人向け統計API

- エンドポイントは `GET /api/stars/{starId}/dashboard` などとし、本人の **サブスクリプション売上/スパチャ収益/ファン増減** を返す。
- スター本人に対しても `starId` の本人証明（認証済みトークン）が必要。Fan向けスコアとの混同を避けるため、`api_key` はスター単位・トークン更新。
- 値は累積・増分・グロスといった多層で返し、APIレスポンスに「単位（JPY）」「時間/日付範囲」を含める。

### 4.2. 事業者向け匿名統計API

- `GET /api/market-insights` などで、ジャンル・カテゴリ別の**匿名集計**（例: `genre="beauty"`, `avgMonthlyRevenue=XX`, `sampleSize=120`）を提供。
- 最小サンプルサイズ（例: 30STAR以上）未満のデータポイントは返さないか、値をぼかす（ノイズ付与）ことで差分攻撃を防ぐ。
- API利用者は `data_license_id` を付与され、利用頻度・出力数に応じたクォータ制限を追加。

## 5. 監査とポリシー違反対応

- **監査ログ**: 全APIリクエストは Supabase の `ops_metrics` に記録。異常なアクセス頻度や大量ダウンロードはアラート対象。
- **違反対応**: `再識別` など規約違反が発覚した場合は、即座にAPIキー無効化＋違反ログ報告＋利用停止。
- **レビュープロセス**: 新しいエンドポイント追加時はデータチームと法務のレビューをパスし、事業側の説明責任を果たす。

## 6. ベストでないアンチパターン

- 生ユーザーデータをそのまま CSV/JSON で提供する危険なモード（禁止）。  
- APIキーを複数人で共有／GitHub等にハードコードする（即時回避措置）。  
- サンプルサイズの少ないスターを個別に露出させることによる再識別リスク。  
- データライセンス契約なしで「自由転載可能」と表記してしまうドキュメント。  
- “収益分布” に加えて「個別のファン名」などPⅡが混ざるパッケージを作成し、企業顧客に渡してしまう構成。

これらのアンチパターンはリスクバランスが崩れており、STARLISTの「ファンとスターの信頼」を損なうため、契約段階での防止・違反時の迅速な停止が必要です。

## 7. 次のステップ（弁護士レビュー・実装）

1. 本ポリシーを法務と一緒にレビューし、「禁止項目」を契約条項に落とし込む。  
2. Supabase/Edge Function のログ・監査ルートが本ポリシーに沿ったものになっているか検証（`ops_metrics` + `super_chat_messages` のアクセスログ）。  
3. APIドキュメント（docs/api）に、Regexで明示的に「Failed/Deniedレスポンス例」を含め、再配布禁止・再識別禁止の注意書きを入れる。  
4. 今後の外部提供を通じて「集計/統計」レイヤがホームグラウンドであることを継続的に意識し、必要なら `MD_CI_REPORT` 的なリストで監査対象を追跡。

## 8. ドキュメント運用ガイドライン

- **PRチェック**: 外部API/統計仕様のPRテンプレには以下のチェックボックスを追加する。  
  * [ ] `DATA_LICENSE_AND_EXTERNAL_API_POLICY.md` の適用確認  
  * [ ] `DATA_ANONYMIZATION_GUIDE.md` との整合  
  * [ ] 必要に応じて `API_TERMS_OF_USE_DRAFT.md` や Runbook の追記  
- **年次棚卸し**: 2026年前半・大規模リリース前のタイミングで、ライセンス・API Terms・匿名化ガイド・Runbook類をまとめて見直す日を設定。  
- **バージョン管理**: 重要な変更を行うたび `version` をインクリメントし `updated` を更新。変更ログは `docs/legal/DATA_LICENSE_CHANGELOG.md`（新規追記対象）に記録。  
- **レビュー体制**: 変更時は開発・PM・法務（将来的には外部顧問）からなる3層レビューを通す。


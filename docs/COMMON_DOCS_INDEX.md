# STARLIST Documentation Index

æœ€çµ‚æ›´æ–°: 2025-11-07

## æ©Ÿèƒ½ä»•æ§˜ä¸€è¦§

### ğŸ”„ è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸä»•æ§˜ã‚¹ã‚¿ãƒ– (Draft)

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ã‚³ãƒ¼ãƒ‰å‚ç…§ | æœ€çµ‚æ›´æ–° |
|-------------|-----------|-----------|----------|
| [AUTO-1](features/__stubs__/AUTO-1.spec.md) | draft | lib/main.dart#13 | 2025-11-07 |
| [AUTO-10](features/__stubs__/AUTO-10.spec.md) | draft | lib/screens/fan_register_screen.dart#246 | 2025-11-07 |
| [AUTO-11](features/__stubs__/AUTO-11.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#53 | 2025-11-07 |
| [AUTO-12](features/__stubs__/AUTO-12.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#60 | 2025-11-07 |
| [AUTO-13](features/__stubs__/AUTO-13.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#67 | 2025-11-07 |
| [AUTO-14](features/__stubs__/AUTO-14.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#74 | 2025-11-07 |
| [AUTO-15](features/__stubs__/AUTO-15.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#81 | 2025-11-07 |
| [AUTO-16](features/__stubs__/AUTO-16.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#93 | 2025-11-07 |
| [AUTO-17](features/__stubs__/AUTO-17.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#103 | 2025-11-07 |
| [AUTO-18](features/__stubs__/AUTO-18.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#120 | 2025-11-07 |
| [AUTO-19](features/__stubs__/AUTO-19.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#128 | 2025-11-07 |
| [AUTO-2](features/__stubs__/AUTO-2.spec.md) | draft | lib/screens/star_home_screen.dart#20 | 2025-11-07 |
| [AUTO-20](features/__stubs__/AUTO-20.spec.md) | draft | lib/src/data/repositories/transaction_repository.dart#135 | 2025-11-07 |
| [AUTO-3](features/__stubs__/AUTO-3.spec.md) | draft | lib/screens/star_home_screen.dart#26 | 2025-11-07 |
| [AUTO-4](features/__stubs__/AUTO-4.spec.md) | draft | lib/screens/star_home_screen.dart#32 | 2025-11-07 |
| [AUTO-5](features/__stubs__/AUTO-5.spec.md) | draft | lib/screens/star_home_screen.dart#71 | 2025-11-07 |
| [AUTO-6](features/__stubs__/AUTO-6.spec.md) | draft | lib/screens/help_center_screen.dart#121 | 2025-11-07 |
| [AUTO-7](features/__stubs__/AUTO-7.spec.md) | draft | lib/screens/help_center_screen.dart#398 | 2025-11-07 |
| [AUTO-8](features/__stubs__/AUTO-8.spec.md) | draft | lib/screens/help_center_screen.dart#416 | 2025-11-07 |
| [AUTO-9](features/__stubs__/AUTO-9.spec.md) | draft | lib/widgets/star_content_management.dart#87 | 2025-11-07 |

### ğŸ“‹ æ­£ä»•æ§˜ (Source of Truth)

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ã‚³ãƒ¼ãƒ‰å‚ç…§ | æœ€çµ‚æ›´æ–° |
|-------------|-----------|-----------|----------|
| *æœªå®š* | - | - | - |

## åŒæœŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

- âœ… ä»•æ§˜ã‚¹ã‚­ãƒ£ãƒ³å®Œäº† (112ä»¶ã®æœªå®šç¾©ä»•æ§˜æ¤œå‡º)
- âœ… ã‚¹ã‚¿ãƒ–è‡ªå‹•ç”Ÿæˆå®Œäº† (20ä»¶)
- ğŸ”„ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è‡ªå‹•æ›´æ–°å®Œäº†

## æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
## 1.4 ãƒ‡ãƒ¼ã‚¿é€£æºï¼ã‚¤ãƒ³ãƒãƒ¼ãƒˆè©³ç´°

- **Flutter å´ UI**: `lib/src/features/data_integration/screens/` ã«å„ã‚µãƒ¼ãƒ“ã‚¹ç”¨ç”»é¢ã€`support_matrix.dart` ã§å¯¾å¿œçŠ¶æ³ã‚’ç®¡ç†ã€‚
- **ãƒ‡ãƒ¼ã‚¿å‡¦ç†**: `lib/src/features/ingest/` ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼è§£æã€`lib/src/features/import_diagnose/` ã§è¨ºæ–­ãƒ•ãƒ­ãƒ¼ã€‚
- **è£œè¶³è³‡æ–™**: `docs/reports/COMPLETE_FILE_MANAGEMENT_GUIDE.md` ã«ãƒ•ã‚¡ã‚¤ãƒ«é€£æºã®å…¨ä½“åƒã€æ—§è³‡æ–™ `docs/planning/Starlist ã¾ã¨ã‚.md` ã«è¦ä»¶è¨˜éŒ²ã€‚


- **Flutter å´ UI**: `lib/src/features/data_integration/screens/` ã«å„ã‚µãƒ¼ãƒ“ã‚¹ç”¨ç”»é¢ã€`support_matrix.dart` ã§å¯¾å¿œçŠ¶æ³ã‚’ç®¡ç†ã€‚
- **ãƒ‡ãƒ¼ã‚¿å‡¦ç†**: `lib/src/features/ingest/` ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼è§£æã€`lib/src/features/import_diagnose/` ã§è¨ºæ–­ãƒ•ãƒ­ãƒ¼ã€‚
- **è£œè¶³è³‡æ–™**: `docs/reports/COMPLETE_FILE_MANAGEMENT_GUIDE.md` ã«ãƒ•ã‚¡ã‚¤ãƒ«é€£æºã®å…¨ä½“åƒã€æ—§è³‡æ–™ `docs/planning/Starlist ã¾ã¨ã‚.md` ã«è¦ä»¶è¨˜éŒ²ã€‚

#### ğŸ†• Day3 Source of Truth ä»•æ§˜ï¼ˆ2025-11-07ï¼‰

| ID | ã‚¿ã‚¤ãƒˆãƒ« | ãƒ‰ãƒ¡ã‚¤ãƒ³ | æ¦‚è¦ |
|----|-----------|----------|------|
| **ING-PIPE-CORE-001** | Ingestãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚³ã‚¢ | ingest | ingest_jobs / audit_ingest ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆã€‚pHashï¼‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒã‚·ãƒ¥ã§é‡è¤‡é˜²æ­¢ã€‚PIIãƒã‚¹ã‚­ãƒ³ã‚°ã¨å†è©¦è¡Œåˆ¶å¾¡ã‚’çµ±ä¸€ã€‚ |
| **ING-OCR-IMAGE-002** | OCRç”»åƒè§£æ | ingest | Google Cloud Vision API ã‚’ä½¿ç”¨ã€‚ä¿¡é ¼åº¦70%æœªæº€ã¯å†è§£æã€‚ãƒ¬ã‚·ãƒ¼ãƒˆã«åŠ ãˆYouTubeï¼éŸ³æ¥½ï¼ã‚²ãƒ¼ãƒ ï¼å­¦ç¿’ã‚¹ã‚¯ã‚·ãƒ§ãªã©ã‚‚å¯¾è±¡ã€‚ |
| **ING-SCREENSHOT-003** | ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå‡¦ç† | ingest | UIè¦ç´ ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰é™¤å»ã¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹é€ åŒ–ã€‚å“è³ªè©•ä¾¡ã‚’è‡ªå‹•ï¼‹æ‰‹å‹•ã§å®Ÿæ–½ã€‚ |
| **ING-YT-PIPE-004** | YouTubeãƒ‡ãƒ¼ã‚¿é€£æº | ingest | Data API v3ã§ãƒãƒ£ãƒ³ãƒãƒ«ãƒ»å‹•ç”»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—ã€‚OAuthçµ±åˆæ¸ˆã¿ã§ãƒ©ã‚¤ãƒ–é…ä¿¡ã‚‚æ¤œçŸ¥ã€‚ |
| **å…±é€šæ©Ÿèƒ½** | - | - | é‡è¤‡é˜²æ­¢ï¼PIIè‡ªå‹•ãƒã‚¹ã‚­ãƒ³ã‚°ï¼OCRä¿¡é ¼åº¦é–¾å€¤ï¼å†è©¦è¡Œï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã®ã¿ï¼‰ï¼ç›£æŸ»ãƒ­ã‚°ä¿å­˜ã€‚ |

#### ğŸ“¦ OCRå…¥åŠ›ã®å¯¾è±¡ç¯„å›²

OCRè§£æã¯ã€Œè³¼è²·æƒ…å ±ã€ã ã‘ã§ãªãã€æ—¥å¸¸è¡Œå‹•ã®è¨¼è·¡ã¨ãªã‚‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå…¨èˆ¬ã‚’å¯¾è±¡ã¨ã™ã‚‹ã€‚

| ç¨®é¡ | ä¾‹ | ä¸»ãªæŠ½å‡ºé …ç›® |
|------|----|--------------|
| ğŸ§¾ ãƒ¬ã‚·ãƒ¼ãƒˆï¼æ˜ç´°æ›¸ | ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ»Amazonãƒ»PayPay | åº—èˆ—åã€æ—¥ä»˜ã€é‡‘é¡ã€å•†å“å |
| ğŸ“º YouTubeè¦–è´ã‚¹ã‚¯ã‚·ãƒ§ | å†ç”Ÿå±¥æ­´ãƒ»ãƒãƒ£ãƒ³ãƒãƒ«ç”»é¢ | å‹•ç”»ã‚¿ã‚¤ãƒˆãƒ«ã€ãƒãƒ£ãƒ³ãƒãƒ«åã€å†ç”Ÿæ™‚é–“ |
| ğŸµ éŸ³æ¥½ã‚¢ãƒ—ãƒª | Spotifyãƒ»Apple Music | æ›²åã€ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã€å†ç”Ÿæ™‚é–“ |
| ğŸ® ã‚²ãƒ¼ãƒ ã‚¢ãƒ—ãƒª | Switchï¼Steamï¼PSNå±¥æ­´ | ã‚²ãƒ¼ãƒ åã€ãƒ—ãƒ¬ã‚¤æ™‚é–“ |
| ğŸ“š å­¦ç¿’ãƒ»è¨˜äº‹ã‚¹ã‚¯ã‚·ãƒ§ | noteï¼Kindleï¼Udemyç­‰ | ã‚¿ã‚¤ãƒˆãƒ«ã€è‘—è€…ã€å­¦ç¿’æ™‚é–“ |

#### ğŸ” ç›£æŸ»ãƒ­ã‚°ã‚¹ã‚­ãƒ¼ãƒï¼ˆå…±é€šï¼‰

```sql
audit_ingest (
  id uuid PK,
  user_id uuid,
  source_type text, -- receipt/screenshot/youtube/music/game/learn
  result jsonb,
  duration_ms int,
  retries int,
  error text,
  created_at timestamptz
)
```

> **æ›´æ–°å±¥æ­´:** 2025-11-07 ãƒ†ã‚£ãƒ ï¼ˆCOO/PMï¼‰ â€” Day3 ingestä»•æ§˜ã‚’ source_of_truth ã«æ˜‡æ ¼ã—ã€OCRå¯¾è±¡ç¯„å›²ã‚’æ‹¡å¼µã€‚


### ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿ä»•æ§˜ç¾¤ï¼ˆDay3å®Œäº†ï¼‰

| ä»•æ§˜ID | ã‚¿ã‚¤ãƒˆãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ã‚³ãƒ¼ãƒ‰å‚ç…§ | æœ€çµ‚æ›´æ–° |
|--------|----------|------------|------------|----------|
| [ING-PIPE-CORE-001](features/__stubs__/ING-PIPE-CORE-001.spec.md) | Ingestãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚³ã‚¢ | source_of_truth | supabase/functions/ingest/index.ts#L1-L150 | 2025-11-07 |
| [ING-OCR-IMAGE-002](features/__stubs__/ING-OCR-IMAGE-002.spec.md) | OCRç”»åƒè§£æ | source_of_truth | supabase/functions/ocr/worker.ts#L1-L200 | 2025-11-07 |
| [ING-SCREENSHOT-003](features/__stubs__/ING-SCREENSHOT-003.spec.md) | ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå‡¦ç† | source_of_truth | lib/utils/phash.ts#L1-L80 | 2025-11-07 |
| [ING-YT-PIPE-004](features/__stubs__/ING-YT-PIPE-004.spec.md) | YouTubeãƒ‡ãƒ¼ã‚¿é€£æº | source_of_truth | supabase/functions/ingest/retry.ts#L1-L100 | 2025-11-07 |

### ä¸»è¦æ©Ÿèƒ½
- **é‡è¤‡é˜²æ­¢**: pHash + ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹åŒä¸€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¤œçŸ¥
- **PIIä¿è­·**: è‡ªå‹•ãƒã‚¹ã‚­ãƒ³ã‚°ï¼ˆãƒ¡ãƒ¼ãƒ«ãƒ»é›»è©±ãƒ»ä½æ‰€ï¼‰
- **OCRè§£æ**: Google Cloud Vision API + ä¿¡é ¼åº¦ç®¡ç†
- **ç›£æŸ»ãƒ­ã‚°**: å…¨æ“ä½œã® `audit_ingest` ãƒ†ãƒ¼ãƒ–ãƒ«è¿½è·¡

### çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **ingest_jobs**: å‡¦ç†ã‚¸ãƒ§ãƒ–ç®¡ç†
- **audit_ingest**: æ“ä½œç›£æŸ»ãƒ­ã‚°
- **60ç§’ç½²åURL**: è³¼èª­è€…é™å®šã‚¢ã‚¯ã‚»ã‚¹
- **3å›å†è©¦è¡Œ**: TIMEOUTæ™‚ã®ã¿æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•


- [ ] æ–°ã—ã„ __stubs__ ã®ãƒªãƒ³ã‚¯ã‚’å„æ­£ä»•æ§˜ã¸çµ±åˆ
- [ ] Statusåˆ—ã« "draft" ã‚’æ˜è¨˜
- [ ] 1é€±é–“ä»¥å†…ã«æœ¬ä»•æ§˜ã¸æ˜‡æ ¼äºˆå®šã¨ã‚³ãƒ¡ãƒ³ãƒˆ

| [PAY-STR-WEBHOOK-003](features/__stubs__/PAY-STR-WEBHOOK-003.spec.md) | source_of_truth | supabase/functions/stripe/webhook/index.ts#L1-L220 | 2025-11-07 |
| [PAY-STR-CORE-001](features/__stubs__/PAY-STR-CORE-001.spec.md) | source_of_truth | lib/features/payment/stripe_checkout.dart#L1-L160 | 2025-11-07 |
| [PAY-STR-SUBS-002](features/__stubs__/PAY-STR-SUBS-002.spec.md) | source_of_truth | supabase/functions/stripe/webhook/index.ts#L1-L220 | 2025-11-07 |
| [SEC-RLS-CORE-001](features/__stubs__/SEC-RLS-CORE-001.spec.md) | source_of_truth | supabase/migrations/2025-rls.sql#L1-L400 | 2025-11-07 |
| [SEC-RLS-STORAGE-002](features/__stubs__/SEC-RLS-STORAGE-002.spec.md) | source_of_truth | supabase/policies/storage_policies.sql#L1-L100 | 2025-11-07 |
| [SEC-RLS-TEST-001](features/__stubs__/SEC-RLS-TEST-001.spec.md) | source_of_truth | tests/rls/rls_e2e.spec.ts#L1-L220 | 2025-11-07 |
| [PAY-POLICY-COMMON-001](features/__stubs__/PAY-POLICY-COMMON-001.spec.md) | source_of_truth | lib/features/payment/refund_policy.ts#L1-L50 | 2025-11-07 |


| [ING-PIPE-CORE-001](features/__stubs__/ING-PIPE-CORE-001.spec.md) | source_of_truth | supabase/functions/ingest/index.ts#L1-L150 | 2025-11-07 |
| [ING-OCR-IMAGE-002](features/__stubs__/ING-OCR-IMAGE-002.spec.md) | source_of_truth | supabase/functions/ocr/worker.ts#L1-L200 | 2025-11-07 |
| [ING-SCREENSHOT-003](features/__stubs__/ING-SCREENSHOT-003.spec.md) | source_of_truth | lib/utils/phash.ts#L1-L80 | 2025-11-07 |
| [ING-YT-PIPE-004](features/__stubs__/ING-YT-PIPE-004.spec.md) | source_of_truth | supabase/functions/ingest/retry.ts#L1-L100 | 2025-11-07 |


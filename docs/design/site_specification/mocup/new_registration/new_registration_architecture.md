# **Starlistアプリ ログインフロー Flutter移植仕様書**

## **1\. はじめに**

### **1.1. プロジェクト概要**

本ドキュメントは、既存のHTML/CSS/JavaScriptで作成された「Starlist」サービスのログインおよびアカウント作成フローを、Flutterフレームワークを用いてモバイルアプリケーションとして移植する際の仕様を定義するものです。

### **1.2. 目的**

* iOS風のUI/UXをFlutterで忠実に再現する。  
* 既存のウェブサイトと同様の機能（ログイン、パスワード再設定、新規アカウント作成）を提供する。  
* 保守性と拡張性の高いコードベースを構築する。

### **1.3. 対象読者**

* Flutter開発者  
* UI/UXデザイナー  
* プロジェクトマネージャー

## **2\. 画面一覧と機能**

このセクションでは、アプリ内の各画面のデザイン要素、表示情報、ユーザーインタラクションについて詳述します。

### **2.1. ログイン画面 (Welcome Screen)**

* **タイトル**: "Starlist" (ヘッダー中央)  
* **アイコン**:  
  * アプリロゴ（星のアイコン、青い背景の角丸四角形）  
* **テキスト**:  
  * "Starlistへようこそ" (メイン見出し)  
  * "スターの日常をもっと身近に" (サブテキスト)  
* **入力フィールド**:  
  * メールアドレスまたはユーザー名 (プレースホルダー: "メールアドレスまたはユーザー名")  
  * パスワード (プレースホルダー: "パスワード")  
* **ボタン**:  
  * "ログイン" (プライマリボタン)  
  * "パスワードをお忘れですか？" (テキストリンク)  
  * "アカウントを作成" (テキストリンク、太字)  
* **区切り線**:  
  * "または" というテキスト付きの水平線  
* **ソーシャルログインボタン**:  
  * "Googleでログイン" (Googleアイコン付き)  
  * "Xでログイン" (Xロゴ付き)  
  * "Facebookでログイン" (Facebookアイコン付き)  
* **フッターテキスト**:  
  * "ログインすることで、Starlistの利用規約およびプライバシーポリシーに同意したことになります。" (利用規約とプライバシーポリシーはリンク)  
* **インタラクション**:  
  * 各入力フィールドへのテキスト入力。  
  * 「ログイン」ボタンタップで認証処理を実行。  
  * 「パスワードをお忘れですか？」タップでパスワード再設定フローへ遷移。  
  * 「アカウントを作成」タップで新規アカウント作成フローへ遷移。  
  * 各ソーシャルログインボタンタップで対応する認証処理を実行。

### **2.2. パスワード再設定フロー**

#### **2.2.1. メールアドレス確認画面 (Password Reset \- Step 1/2)**

* **ヘッダー**:  
  * 左側: "キャンセル" (テキストボタン、タップで前の画面またはログイン画面へ戻る)  
  * 中央: "パスワード再設定" (タイトル)  
* **ステップインジケーター**: "ステップ 1/2"  
* **見出し**: "メールアドレス確認"  
* **説明テキスト**: "アカウントに登録したメールアドレスを入力してください。パスワード再設定のための確認コードを送信します。"  
* **入力フィールド**:  
  * 登録済みのメールアドレス (プレースホルダー: "登録済みのメールアドレス")  
* **ボタン**:  
  * "確認コードを送信" (プライマリボタン)  
* **通知カード**:  
  * 情報アイコン (iマーク)  
  * テキスト: "登録したメールアドレスが分からない場合は、カスタマーサポートまでお問い合わせください。" (カスタマーサポートはリンク)  
* **フローインジケーター**: ドット2つのうち、1つ目がアクティブ。  
* **インタラクション**:  
  * メールアドレス入力後、「確認コードを送信」ボタンタップでサーバーにリクエスト送信。  
  * 成功時は次のステップ（新しいパスワード設定画面）へ遷移。

#### **2.2.2. 新しいパスワード設定画面 (Password Reset \- Step 2/2)**

* **ヘッダー**:  
  * 左側: "戻る" (テキストボタン、タップでメールアドレス確認画面へ戻る)  
  * 中央: "パスワード再設定" (タイトル)  
* **ステップインジケーター**: "ステップ 2/2"  
* **見出し**: "新しいパスワードを設定"  
* **説明テキスト**: "安全なパスワードを設定してください。8文字以上で、英数字を含める必要があります。"  
* **入力フィールド**:  
  * 新しいパスワード (プレースホルダー: "新しいパスワード")  
  * パスワードを確認 (プレースホルダー: "パスワードを確認")  
* **パスワード強度インジケーター**:  
  * テキスト: "パスワード強度:" (左側), "強い" (右側、動的に変化)  
  * プログレスバー (強度に応じて色が変化: 例: 緑)  
* **ボタン**:  
  * "パスワードを更新" (プライマリボタン)  
* **情報カード**:  
  * 見出し: "安全なパスワードの条件:"  
  * リスト:  
    * "8文字以上" (チェックマーク付き)  
    * "英大文字と小文字を含む" (チェックマーク付き)  
    * "数字を含む" (チェックマーク付き)  
* **フローインジケーター**: ドット2つのうち、2つ目がアクティブ。  
* **インタラクション**:  
  * 新しいパスワードと確認用パスワードを入力。  
  * 両者が一致し、条件を満たしていれば「パスワードを更新」ボタンが有効化。  
  * ボタンタップでパスワード更新処理を実行。成功時はログイン画面へ遷移または自動ログイン。

### **2.3. 新規アカウント作成フロー**

#### **2.3.1. 基本情報入力画面 (Create Account \- Step 1/4)**

* **ヘッダー**:  
  * 左側: "キャンセル" (テキストボタン、タップでログイン画面へ戻る)  
  * 中央: "アカウント作成" (タイトル)  
* **フローナビゲーション**: 円形ドット4つのうち、1つ目がアクティブ。  
* **ステップインジケーター**: "ステップ 1/4"  
* **見出し**: "基本情報を入力"  
* **説明テキスト**: "Starlistアカウントを作成するために必要な情報を入力してください。"  
* **入力フィールド**:  
  * ユーザーネーム (プレースホルダー: "ユーザーネーム")  
  * 表示名 (プレースホルダー: "表示名")  
  * メールアドレス (プレースホルダー: "メールアドレス")  
  * パスワード（8文字以上） (プレースホルダー: "パスワード（8文字以上）")  
* **チェックボックス**:  
  * "Starlistからのお知らせやキャンペーン情報を受け取る"  
* **ボタン**:  
  * "次へ" (プライマリボタン)  
* **フッターテキスト**:  
  * "すでにアカウントをお持ちですか？ ログイン" (ログインはリンク)  
* **インタラクション**:  
  * 各情報を入力。  
  * 「次へ」ボタンタップで入力内容を検証し、問題なければ年齢確認画面へ遷移。

#### **2.3.2. 年齢確認画面 (Create Account \- Step 2/4)**

* **ヘッダー**:  
  * 左側: "戻る" (テキストボタン、タップで基本情報入力画面へ戻る)  
  * 中央: "アカウント作成" (タイトル)  
* **フローナビゲーション**: 1つ目が完了状態、2つ目がアクティブ。  
* **ステップインジケーター**: "ステップ 2/4"  
* **見出し**: "年齢確認"  
* **説明テキスト**: "あなたの年齢層を教えてください。より良いコンテンツをお届けするために使用されます。"  
* **年齢選択ボタン群**:  
  * "10代", "20代", "30代", "40代" (1行目)  
  * "50代", "60代", "70代+", "回答しない" (2行目)  
  * 各ボタンは選択可能。選択されたボタンはスタイルが変化し、チェックマークが表示される。単一選択。  
* **注釈テキスト**:  
  * "※年齢情報は個人を特定するために使用されることはありません。"  
  * "※あなたに合ったコンテンツの推奨やサービス改善のために活用されます。"  
* **ボタン**:  
  * "次へ" (プライマリボタン)  
* **インタラクション**:  
  * 年齢層を選択。  
  * 「次へ」ボタンタップで普段利用するサービス選択画面へ遷移。

#### **2.3.3. 普段利用するサービス選択画面 (Create Account \- Step 3/4)**

* **ヘッダー**:  
  * 左側: "戻る" (テキストボタン、タップで年齢確認画面へ戻る)  
  * 中央: "アカウント作成" (タイトル)  
* **フローナビゲーション**: 1,2つ目が完了状態、3つ目がアクティブ。  
* **ステップインジケーター**: "ステップ 3/4"  
* **見出し**: "普段利用するサービス"  
* **説明テキスト**: "普段利用するSNSや配信サイトを選択してください。連携機能の向上に役立ちます。（複数選択可）"  
* **サービス選択カード群**:  
  * **SNSセクション**:  
    * X (Xロゴ), Facebook (FBアイコン), BeReal (モバイルアイコン), Threads (アットマークアイコン)  
  * **動画/配信サイトセクション**:  
    * YouTube (YTアイコン), Instagram (IGアイコン), TikTok (TikTokアイコン), Twitch (Twitchアイコン), ツイキャス (マイクアイコン), ふわっち (ビデオアイコン), Palmu (ツリーアイコン), TwitCasting (放送塔アイコン), SHOWROOM (TVアイコン), 17LIVE (ビデオアイコン), ニコニコ (笑顔アイコン), LINE LIVE (LINEアイコン), Mildom (ゲームパッドアイコン), OPENREC (再生アイコン), Mirrativ (モバイルアイコン), REALITY (VRアイコン), IRIAM (スマイルアイコン), BIGO LIVE (地球儀アイコン), Spoon (マイクアイコン), Pococha (ハートアイコン), TangoMe (コメントアイコン)  
  * 各カードはアイコンとサービス名を表示。  
  * 複数選択可能。選択されたカードはスタイルが変化し、チェックマークが表示される。  
* **選択数表示**: "X個選択中" (動的に更新)  
* **ボタン**:  
  * "次へ" (プライマリボタン)  
* **インタラクション**:  
  * サービスカードをタップして選択/選択解除。  
  * 「次へ」ボタンタップで利用規約同意画面へ遷移。

#### **2.3.4. 利用規約と個人情報保護方針画面 (Create Account \- Step 4/4)**

* **ヘッダー**:  
  * 左側: "戻る" (テキストボタン、タップで普段利用するサービス選択画面へ戻る)  
  * 中央: "アカウント作成" (タイトル)  
* **フローナビゲーション**: 1,2,3つ目が完了状態、4つ目がアクティブ。  
* **ステップインジケーター**: "ステップ 4/4"  
* **見出し**: "利用規約と個人情報保護方針"  
* **説明テキスト**: "続行する前に、下記の規約をご確認ください。"  
* **規約表示エリア**:  
  * スクロール可能なテキストエリア。  
  * "Starlist利用規約" (見出し)  
  * 規約内容のプレースホルダーテキスト。  
* **チェックボックス**:  
  * "利用規約に同意します"  
  * "個人情報保護方針に同意します"  
* **ボタン**:  
  * "同意してアカウント作成" (プライマリボタン)  
* **インタラクション**:  
  * 両方のチェックボックスにチェックを入れると「同意してアカウント作成」ボタンが有効化。  
  * ボタンタップでアカウント作成処理を実行。成功時はアカウント作成完了画面へ遷移。

#### **2.3.5. アカウント作成完了画面 (Account Creation Complete)**

* **ヘッダー**:  
  * 中央: "アカウント作成完了" (タイトル)  
* **アイコン**:  
  * 緑色の背景に白いチェックマークの大きな円形アイコン  
* **テキスト**:  
  * "アカウント設定完了\!" (メイン見出し)  
  * "Starlistへようこそ" (サブテキスト)  
* **通知カード (青背景)**:  
  * 情報アイコン  
  * テキスト: "あなたの好みに基づいたコンテンツをホーム画面に表示しています。ぜひチェックしてみてください。"  
* **通知カード (グレー背景)**:  
  * 見出し: "次のステップ"  
  * リスト:  
    * "プロフィールを完成させる" (ユーザーアイコン付き)  
    * "好きなスターをフォローする" (スターアイコン付き)  
    * "通知設定を確認する" (ベルアイコン付き)  
* **ボタン**:  
  * "ホームに進む" (プライマリボタン)  
* **インタラクション**:  
  * 「ホームに進む」ボタンタップでアプリのメイン画面（ホーム画面）へ遷移。

## **3\. 共通コンポーネントとスタイル**

Flutterで再利用可能なウィジェットとして実装します。

### **3.1. iOS風コンテナ (`.ios-container`)**

* `Card` ウィジェットや `Container` ウィジェットを組み合わせ、角丸 (`BorderRadius.circular(30)`) と影 (`BoxShadow`) を適用。  
* 最大幅を設定 (例: `constraints: BoxConstraints(maxWidth: 390)` )。

### **3.2. iOS風ヘッダー (`.ios-header`)**

* `AppBar` ウィジェットをカスタマイズ。  
* 高さ: `kToolbarHeight` (Flutterの標準的な高さ) またはカスタム値 (44.0)。  
* 背景色: 白。  
* 下線: `Border(bottom: BorderSide(color: Color(0xFFF1F1F1)))`。

### **3.3. iOS風コンテンツエリア (`.ios-content`)**

* `Padding` ウィジェットで内側の余白 (`EdgeInsets.all(20.0)`) を設定。  
* 背景色: 白。

### **3.4. iOS風プライマリボタン (`.ios-button`)**

* `ElevatedButton` または `TextButton` をカスタマイズ。  
* 背景色: `Color(0xFF007AFF)` (iOS標準ブルー)。  
* 文字色: 白。  
* 角丸: `BorderRadius.circular(10)`。  
* パディング: `EdgeInsets.symmetric(horizontal: 20, vertical: 12)`。  
* フォントウェイト: `FontWeight.w600`。  
* ホバー時のスタイルはモバイルでは通常不要だが、デスクトップ対応を考慮する場合は `MouseRegion` などで対応。

### **3.5. iOS風セカンダリボタン (`.ios-button.secondary`)**

* プライマリボタンと同様のコンポーネントをベースにスタイルを変更。  
* 背景色: `Color(0xFFE9E9EB)` (iOSライトグレー)。  
* 文字色: `Color(0xFF007AFF)`。

### **3.6. iOS風入力フィールド (`.ios-input`)**

* `TextField` ウィジェットをカスタマイズ。  
* `InputDecoration` を使用。  
* 枠線: `OutlineInputBorder(borderRadius: BorderRadius.circular(10), borderSide: BorderSide(color: Color(0xFFE9E9EB)))`。  
* フォーカス時の枠線色: `Color(0xFF007AFF)`。  
* パディング: `contentPadding: EdgeInsets.symmetric(horizontal: 15, vertical: 12)`。

### **3.7. ソーシャルログインボタン (`.social-button`)**

* `OutlinedButton` や `TextButton` にアイコンとテキストを配置。  
* `Row` ウィジェットでアイコンとテキストを横並び。  
* 角丸、枠線、背景色をCSSに合わせて設定。

### **3.8. チェックボックス (`.checkbox-container`)**

* `CheckboxListTile` または `Row` と `Checkbox`、`Text` ウィジェットを組み合わせる。

### **3.9. セクション区切り線 (`.section-divider`)**

* `Stack` と `Divider`、`Text` ウィジェットを組み合わせて実装。  
* テキストの背景を白抜きにするスタイルを再現。

### **3.10. フローインジケーター (ドット) (`.flow-indicator`, `.flow-dot`)**

* `Row` ウィジェット内に複数の円形 `Container` (ドット) を配置。  
* アクティブなドットは背景色を変更 (`Color(0xFF007AFF)`)。

### **3.11. フローナビゲーション (円形) (`.flow-nav`, `.flow-circle`)**

* フローインジケーターと同様だが、完了状態の色 (`Color(0xFF34C759)`) も定義。

### **3.12. カードコンテナとカード (`.card-container`, `.genre-card`, `.star-card`, `.sns-card`)**

* `Wrap` ウィジェットを使用してカードを折り返し表示。`spacing` と `runSpacing` でカード間の隙間を設定。  
* 各カードは `GestureDetector` でタップイベントを処理し、`Container` でスタイルを定義。  
* 選択状態 (`.selected`) は `StatefulWidget` で管理し、スタイル（背景色、枠線、チェックマーク）を動的に変更。  
* チェックマークは `Stack` を使用してカードの右上に表示。  
* スターカード内の画像 (`.star-card img`) は `CircleAvatar` や `ClipRRect` で円形に表示。

### **3.13. ステップインジケーター (`.step-indicator`)**

* `Container` ウィジェットに角丸と背景色、パディングを設定し、中に `Text` ウィジェットを配置。

### **3.14. 通知カード (`.notification-card`)**

* `Card` または `Container` ウィジェットで背景色と角丸を設定。  
* 内部は `Row` や `Column` でアイコンとテキストを配置。

### **3.15. 年齢選択ボタン (`.age-selector`, `.age-range`)**

* `Row` ウィジェットで横並びに配置。`Expanded` や `Flexible` で均等分割。  
* 各ボタンは `GestureDetector` と `Container` で実装。選択状態を管理しスタイルを変更。

### **3.16. アイコン**

* Font Awesomeアイコンは `font_awesome_flutter` パッケージを利用。  
* Xロゴはテキストウィジェット (`Text('𝕏', style: TextStyle(fontWeight: FontWeight.bold, fontSize: ...))`) で表現。

## **4\. 状態管理**

* 画面内のローカルな状態（入力値、選択状態など）は `StatefulWidget` の `State` で管理。  
* 画面遷移を伴うフローの状態や、アプリ全体で共有する可能性のある情報（認証状態など）については、`Provider`, `Riverpod`, `Bloc` などの状態管理ライブラリの導入を検討。本仕様では特定のライブラリを強制しないが、選択したライブラリのベストプラクティスに従うこと。

## **5\. ナビゲーション**

* Flutterの標準的なナビゲーション (`Navigator.push`, `Navigator.pop` など) を使用。  
* 必要に応じて名前付きルート (`MaterialApp` の `routes` または `onGenerateRoute`) を定義する。

## **6\. テーマ・スタイル**

* `MaterialApp` の `theme` プロパティでアプリ全体の基本テーマ（フォント、主要な色など）を設定。  
* iOS風のフォント (`-apple-system`, `BlinkMacSystemFont` など) に近いフォントファミリーを `pubspec.yaml` で指定し、テーマに適用する（例: `fontFamily: 'SFProText'` など、適切なフォントファイルを用意する必要がある）。  
* カラーパレットはCSSで定義されている色をFlutterの `Color` オブジェクトとして定義し、再利用する。

## **7\. その他**

### **7.1. JavaScriptロジックの移植**

* `DOMContentLoaded` 内のイベントリスナー（カード選択、年齢選択）は、Flutterのウィジェットのコールバック関数 (`onTap`, `onChanged` など) と状態管理ロジックに置き換える。  
* 選択数の動的更新は、状態変更を検知してUIを再描画するFlutterの仕組み (`setState` や状態管理ライブラリの更新通知) で実現する。

### **7.2. レスポンシブ対応**

* `ios-container` の `max-width` は、Flutterでは `LayoutBuilder` や `MediaQuery` を使って画面サイズに応じたレイアウト調整を検討できるが、基本的には指定された固定幅のデザインに従う。

### **7.3. パッケージ**

* `font_awesome_flutter`: Font Awesome アイコン用。  
* その他、状態管理やHTTP通信などで必要なパッケージは適宜導入する。


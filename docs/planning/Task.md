\# Starlist タスク管理

このファイルはStarlistプロジェクトの開発タスクを管理・追跡するために使用します。タスクは優先度と開発フェーズに基づいて整理されています。

\## 優先度レベル

\- \*\*P0\*\*: 緊急（即時対応が必要）

\- \*\*P1\*\*: 高（次回リリースに含める必要あり）

\- \*\*P2\*\*: 中（できれば次回リリースに含めたい）

\- \*\*P3\*\*: 低（将来のリリースで対応）

\## 状態

\- 🔄 進行中

\- ✅ 完了

\- 🔜 次のスプリント

\- 📅 スケジュール済み

\- ⏸️ 保留中

\## フェーズ1タスク（MVP）

\### 認証システム

\- \[x\] P1 🔄 ✅ 完了 ユーザー登録機能

\- \[x\] P1 🔄 ✅ 完了 ログイン機能

\- \[x\] P2 🔜 ✅ 完了 ソーシャルログイン連携

\- \[ \] P2 📅 アカウント管理画面の実装

\- \[ \] P2 📅 パスワードリセット機能

\### プロフィール管理

\- \[x\] P1 ✅ 基本プロフィール情報の設定 ✅ 完了

\- \[x\] P1 ✅ スター/ファン区分の実装 ✅ 完了

\- \[ \] P2 🔜 プロフィール画像アップロード

\- \[ \] P2 📅 プロフィール閲覧権限設定

\- \[ \] P3 📅 プロフィール編集履歴

\### データ連携

\- \[x\] P1 ✅ 完了 YouTube視聴履歴

\- \[x\] P1 ✅ 完了 Spotify再生履歴

\- \[x\] P2 ✅ 完了 Amazon購入履歴取込

\- \[x\] P2 ✅ 完了 Netflix視聴履歴連携

\- \[x\] P1 ✅ 完了 データインポート診断機能

\- \[ \] P1 📅 データ取り込みの精度UP

\- \[ \] P3 📅 スクリーンタイムデータ連携

\### UI/UX基本実装

\- \[x\] P1 🔄 ✅ 完了 アプリのテーマ設定

\- \[x\] P1 ✅ ナビゲーション構造の実装 ✅ 完了

\- \[x\] P1 🔜 ✅ 完了 基本リストビューの実装

\- \[ \] P2 📅 タイムライン表示の実装

\- \[ \] P2 📅 ダークモード対応

### 課金システム

- [x] P1 ✅ 完了 決済システム基盤
- [x] P1 ✅ 完了 サブスクリプション機能
- [x] P1 ✅ 完了 プレミアム機能実装
- [x] P2 ✅ 完了 ポイント購入機能
- [x] P2 ✅ 完了 収益分析ダッシュボード
- [ ] P2 📅 決済方法の追加（PayPal等）

### ガチャ機能

- [x] P2 ✅ 完了 ガチャシステム実装
- [x] P2 ✅ 完了 スターカードガチャ
- [x] P2 ✅ 完了 レアリティ管理
- [ ] P3 📅 ガチャバランス調整

### 検索・マイリスト機能

- [x] P1 ✅ 完了 スター検索機能
- [x] P1 ✅ 完了 コンテンツ検索機能
- [x] P1 ✅ 完了 フィルター機能
- [x] P2 ✅ 完了 マイリスト機能
- [ ] P2 📅 検索精度の向上

### 分析・管理機能

- [x] P1 ✅ 完了 分析ダッシュボード
- [x] P1 ✅ 完了 管理者機能（スター認証管理）
- [x] P2 ✅ 完了 ソーシャルリンク機能
- [x] P2 ✅ 完了 メンバーシップ管理
- [ ] P2 📅 高度な分析機能の追加

### 機能開発

- [ ] **新規スター登録・認証フローの実装**
  - [ ] **DBスキーマ設計**:
    - [ ] `users`テーブルに`verification_status`カラムを追加/更新 (`awaiting_terms_agreement`, `awaiting_ekyc`, `awaiting_parental_consent`, `awaiting_sns_verification`, `pending_review`, `approved`, `rejected`)
    - [ ] `parental_consents`テーブルを新規作成
    - [ ] Supabaseマイグレーションスクリプトの作成
  - [ ] **ステップA: 事務所利用規約への同意画面 (`TermsAgreementScreen`)**
    - [ ] UI/UX実装
    - [ ] 同意状態の永続化とステータス更新 (`awaiting_ekyc`)
    - [ ] Widgetテスト作成
  - [ ] **ステップB: eKYCによる本人・年齢確認 (`eKYCStartScreen`)**
    - [ ] サードパーティeKYCサービスのSDK連携
    - [ ] コールバックを受け取るAPIエンドポイント実装 (Supabase Edge Functions)
    - [ ] 年齢判定ロジック（18歳未満/以上）を実装
    - [ ] ステータス更新ロジック (`awaiting_sns_verification` or `awaiting_parental_consent`)
    - [ ] ユニットテスト/統合テスト作成
  - [ ] **ステップC: 親権者同意フロー (`ParentalConsentScreen`)**
    - [ ] UI/UX実装（情報入力、同意書DL、画像アップロード）
    - [ ] 同意書アップロード処理 (Supabase Storage)
    - [ ] 親権者情報をDBに保存するAPI実装
    - [ ] ステータス更新ロジック (`awaiting_sns_verification`)
    - [ ] Widgetテスト作成
  - [ ] **ステップD: SNSアカウント所有権確認**
    - [ ] 既存のSNS連携機能を認証フローに統合
    - [ ] 所有権確認ロジック（ユニークコード埋め込み等）を実装
    - [ ] ステータス更新ロジック (`pending_review`)
    - [ ] 統合テスト作成
  - [ ] **運営向け承認管理画面の強化**
    - [ ] 申請者情報（eKYC結果、年齢、親権者同意書など）の一元表示
    - [ ] 承認(`approved`) / 拒否(`rejected`)の実行機能
    - [ ] 変更後のステータスをDBに反映
  - [ ] **認証フロー全体の制御**
    - [ ] `verification_status`が`approved`になるまで機能制限をかけるロジックを実装

- [ ] **UI/UX改善**

\## フェーズ2タスク

\### OCR機能

\- \[ \] P1 📅 レシート読み取り機能

\- \[ \] P1 📅 商品情報の抽出ロジック

\- \[ \] P2 📅 重複検出アルゴリズム

\- \[ \] P2 📅 OCR精度改善

\- \[ \] P3 📅 プライバシー考慮機能

\### プライバシー設定

\- \[ \] P1 📅 項目別公開設定

\- \[ \] P1 📅 閲覧権限の細分化

\- \[ \] P2 📅 ブロック機能

\- \[ \] P2 📅 コンテンツフィルタリング

\- \[ \] P3 📅 自動プライバシー推奨設定

\## フェーズ3タスク

\### AI分析機能

\- \[ \] P1 🔄 進行中 AI秘書機能の実装（設計完了）
  - \[ \] Supabaseテーブル設計・マイグレーション
  - \[ \] Dartモデルクラス作成
  - \[ \] AIリポジトリ実装
  - \[ \] スター向けダッシュボードUI
  - \[ \] ファン向け推薦機能

\- \[ \] P1 📅 AIスケジューラーモデル（設計完了）
  - \[ \] 最適な投稿タイミング算出
  - \[ \] Google Calendar連携
  - \[ \] 自動リマインダー

\- \[ \] P1 📅 AIコンテンツアドバイザー（設計完了）
  - \[ \] トレンド検出機能
  - \[ \] コンテンツアイデア生成
  - \[ \] エンゲージメント予測

\- \[ \] P2 📅 AIデータブリッジ（設計完了）
  - \[ \] MCP連携
  - \[ \] 複数データソース統合

\- \[ \] P2 📅 感情分析機能

\- \[ \] P2 📅 コンテンツカテゴライズ自動化

\- \[ \] P3 📅 予測モデルの実装

\### インタラクション拡張

\- \[ \] P1 📅 コメント機能の高度化

\- \[ \] P1 📅 リアクションシステムの拡張

\- \[ \] P2 📅 有料提案システム

\- \[ \] P2 📅 イベント通知機能

\- \[ \] P3 📅 インタラクション分析ダッシュボード

\## 進捗追跡

\### 実装完了（2025年10月15日時点）

✅ **フェーズ1（MVP）完了**
\- 認証システム（ログイン、登録、SNS連携）
\- プロフィール管理（スター/ファン区分）
\- データ連携（YouTube, Spotify, Amazon, Netflix）
\- 基本UI/UX（テーマ、ナビゲーション、リストビュー）
\- 課金システム（決済、サブスクリプション、プレミアム）
\- ガチャ機能（スターカード、レアリティ管理）
\- 検索・マイリスト機能
\- 分析・管理機能

📊 **実装統計**
\- 実装機能: 23機能
\- 画面数: 114画面
\- プロバイダー数: 39
\- サービス数: 64

\### 現在のスプリント（2025/10/15-10/31）

🔄 **進行中**
\- AI秘書機能の実装開始
  - データベース設計
  - モデルクラス作成
  - リポジトリ実装

📅 **計画中**
\- AIスケジューラーモデルの実装
\- AIコンテンツアドバイザーの実装
\- データ取り込み精度の向上

\### 次回スプリント（2025/11/1-11/15）

\- AI機能のPoC完成
\- パフォーマンス最適化
\- ユーザーテスト実施
\- フィードバック収集と改善

\## 技術的負債＆リファクタリング予定

\- \[ \] P2 📅 状態管理ライブラリの統一

\- \[ \] P2 📅 エラーハンドリングの統一化

\- \[ \] P3 📅 非同期処理パターンの標準化

\- \[ \] P3 📅 UI層のコンポーネント分割

\- \[ \] P3 📅 テストカバレッジの向上

\## 参照

\- \[Planning.txr\](Planning.txr) - プロジェクトの全体計画

\- \[README.txr\](README.txr) - プロジェクト概要と要件定義
